<!DOCTYPE html>
<html>
<head>
    <title>æ¸…ç† HTTPulse æµ‹è¯•æ•°æ®</title>
    <meta charset="utf-8">
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        button {
            background: #d32f2f;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 4px;
            cursor: pointer;
            margin: 10px 5px;
        }
        button:hover {
            background: #b71c1c;
        }
        .success {
            background: #4caf50;
        }
        .success:hover {
            background: #388e3c;
        }
        #result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 4px;
            display: none;
        }
        .info {
            background: #e3f2fd;
            color: #1976d2;
        }
        .error {
            background: #ffebee;
            color: #c62828;
        }
        .success-msg {
            background: #e8f5e9;
            color: #2e7d32;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ—‘ï¸?æ¸…ç† HTTPulse æµ‹è¯•æ•°æ®</h1>
        <p>æ­¤å·¥å…·ç”¨äºæ¸…ç†æµè§ˆå™¨ä¸­çš„ HTTPulse æµ‹è¯•æ•°æ®ï¼ˆIndexedDBï¼?/p>
        
        <h3>âš ï¸ æ³¨æ„</h3>
        <ul>
            <li>æ­¤æ“ä½œå°†åˆ é™¤æ‰€æœ‰ç¯å¢ƒå˜é‡é…ç½?/li>
            <li>æ­¤æ“ä½œå°†åˆ é™¤æ‰€æœ?API é…ç½®</li>
            <li>æ­¤æ“ä½œå°†åˆ é™¤æ‰€æœ‰å“åº”å†å²è®°å½?/li>
            <li><strong>æ­¤æ“ä½œä¸å¯æ¢å¤ï¼</strong></li>
        </ul>

        <button onclick="clearAllData()">æ¸…é™¤æ‰€æœ‰æ•°æ?/button>
        <button class="success" onclick="checkData()">æ£€æŸ¥å½“å‰æ•°æ?/button>
        
        <div id="result"></div>
    </div>

    <script>
        async function clearAllData() {
            const result = document.getElementById('result');
            result.style.display = 'block';
            result.className = 'info';
            result.textContent = 'æ­£åœ¨æ¸…ç†æ•°æ®...';

            try {
                // åˆ é™¤ HTTPulseDB æ•°æ®åº?
                await new Promise((resolve, reject) => {
                    const request = indexedDB.deleteDatabase('HTTPulseDB');
                    request.onsuccess = resolve;
                    request.onerror = reject;
                    request.onblocked = () => {
                        result.className = 'error';
                        result.textContent = 'â?æ•°æ®åº“è¢«é˜»å¡ï¼Œè¯·å…³é—­æ‰€æœ‰æ‰“å¼€çš?HTTPulse åº”ç”¨çª—å£åé‡è¯?;
                    };
                });

                result.className = 'success-msg';
                result.textContent = 'âœ?æ‰€æœ‰æµ‹è¯•æ•°æ®å·²æ¸…é™¤ï¼IndexedDB æ•°æ®åº“å·²åˆ é™¤ã€?;
                
                console.log('âœ?HTTPulseDB å·²åˆ é™?);
            } catch (error) {
                result.className = 'error';
                result.textContent = `â?æ¸…ç†å¤±è´¥: ${error.message}`;
                console.error('æ¸…ç†å¤±è´¥:', error);
            }
        }

        async function checkData() {
            const result = document.getElementById('result');
            result.style.display = 'block';
            result.className = 'info';

            try {
                const databases = await indexedDB.databases();
                const cyberDB = databases.find(db => db.name === 'HTTPulseDB');
                
                if (cyberDB) {
                    result.textContent = `ğŸ“Š å‘ç°æ•°æ®åº? HTTPulseDB (ç‰ˆæœ¬ ${cyberDB.version})`;
                } else {
                    result.className = 'success-msg';
                    result.textContent = 'âœ?æœªå‘ç°æµ‹è¯•æ•°æ®ï¼Œæ•°æ®åº“æ˜¯å¹²å‡€çš?;
                }
            } catch (error) {
                result.className = 'error';
                result.textContent = `â?æ£€æŸ¥å¤±è´? ${error.message}`;
            }
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ£€æŸ?
        window.onload = () => {
            checkData();
        };
    </script>
</body>
</html>

